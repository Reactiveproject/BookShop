(()=>{"use strict";var t={d:(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{K:()=>E});const e=document.querySelector(".header__burger-logo"),o=document.querySelector(".header__burger-body"),r=document.querySelectorAll(".poster-items__item"),c=document.querySelectorAll(".sliderdotz__item");let i=0;const s=t=>{c.forEach((t=>t.classList.remove("sliderdotz__item_active"))),c[t].classList.add("sliderdotz__item_active"),r.forEach((t=>t.classList.remove("poster-items__item_active"))),r[t].classList.add("poster-items__item_active")},n=(t,e)=>{t.addEventListener("click",(()=>{i=e,s(i)}))},l=document.querySelectorAll(".book-list__list-item");let a;const u=()=>{l.forEach((t=>{t.classList.contains("book-list__list-item_active")&&(a=t.innerText)}))},d=document.querySelectorAll(".cards-block__cards-item"),m=document.querySelectorAll(".cards-item__img"),_=document.querySelectorAll(".cards-item__author"),f=document.querySelectorAll(".cards-item__title"),v=document.querySelectorAll(".cards-item__stars_active"),g=document.querySelectorAll(".cards-item__views"),b=document.querySelectorAll(".cards-item__disc"),p=document.querySelectorAll(".cards-item__price"),y=document.querySelector(".books-block__button"),h=document.querySelectorAll(".cards-item__button"),L=document.querySelector(".cart-count");let I;const S=new class{products;constructor(){this.products=[]}get count(){return this.products.length}};function k(){!function(){const t=JSON.parse(localStorage.getItem("cart"));S.products=t.products,L.textContent=S.count}(),0==L.textContent?L.classList.remove("cart-count__active"):L.classList.add("cart-count__active"),h.forEach((t=>{A(t),S.products.includes(I)?q(t):w(t)}))}const A=t=>{let e=t.closest(".cards-block__cards-item");return I=e.getAttribute("bookid"),I},q=t=>{t.classList.add("button__tabbed"),t.textContent="in the cart"},w=t=>{t.classList.remove("button__tabbed"),t.textContent="buy now"};e.addEventListener("click",(()=>{e.classList.toggle("used"),o.classList.toggle("shown")})),r.forEach(n),c.forEach(n),(()=>{let t=0;setInterval((()=>{s(t),t==r.length-1?t=0:t++}),5e3)})(),l.forEach(((t,e)=>{let o;t.addEventListener("click",(()=>{o=e,(t=>{l.forEach((t=>t.classList.remove("book-list__list-item_active"))),l[t].classList.add("book-list__list-item_active")})(o),u(),T()}))}));let E=0;async function T(){let t=await async function(){let t=`https://www.googleapis.com/books/v1/volumes?q="subject:${a}"&key=AIzaSyCtJI5Ny3xpinAktf4VXAeiWG3j0-j1B1k&printType=books&startIndex=${E}&maxResults=6&langRestrict=en`;const e=await fetch(t),o=await e.json();return console.log(o.items),o.items}();await function(t){for(let e=0;e<t.length;e++)d[e].setAttribute("bookid",t[e].volumeInfo.industryIdentifiers[0].identifier),f[e].innerHTML=t[e].volumeInfo.title,t[e].volumeInfo.authors?t[e].volumeInfo.authors.length>1?_[e].innerHTML=t[e].volumeInfo.authors.toString():_[e].innerHTML=t[e].volumeInfo.authors[0]:_[e].innerHTML="N/A",t[e].volumeInfo.imageLinks?m[e].innerHTML=`<img src="${t[e].volumeInfo.imageLinks.thumbnail}" alt="pic of book" />`:m[e].innerHTML='<img src="/src/img/placeholder_pic.jpg" alt="pic of book" />',t[e].volumeInfo.description?b[e].innerHTML=t[e].volumeInfo.description:b[e].innerHTML="N/A",t[e].saleInfo.retailPrice&&(p[e].innerHTML=`${t[e].saleInfo.retailPrice.currencyCode} ${t[e].saleInfo.retailPrice.amount}`),t[e].volumeInfo.ratingsCount&&(g[e].innerHTML=`${t[e].volumeInfo.ratingsCount} review`),t[e].volumeInfo.averageRating&&(v[e].style.width=t[e].volumeInfo.averageRating/.05+"%")}(t),await k()}u(),T(),y.addEventListener("click",(()=>{E+=6,T()})),null==localStorage.getItem("cart")&&localStorage.setItem("cart",JSON.stringify(S)),h.forEach((t=>{t.addEventListener("click",(()=>{A(t),function(t){const e=S.products.indexOf(t);S.products.includes(t)?S.products.splice(e,1):S.products.push(t),localStorage.setItem("cart",JSON.stringify(S))}(I),k()}))}))})();